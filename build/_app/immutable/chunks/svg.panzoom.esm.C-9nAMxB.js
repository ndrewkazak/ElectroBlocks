import{e as vt,S as ft,o as A,a as I,B as tt,M as nt}from"./virtual-circuit.DMf_QO9c.js";var f=function(o){return o.touches||[{clientX:o.clientX,clientY:o.clientY}]};vt(ft,{panZoom:function(o){var D,O,C,G,z,y,N,$,L,b,F,B,k=this;if(this.off(".panZoom"),o===!1)return this;o=(D=o)!=null?D:{};var ot=(O=o.zoomFactor)!=null?O:2,T=(C=o.zoomMin)!=null?C:Number.MIN_VALUE,X=(G=o.zoomMax)!=null?G:Number.MAX_VALUE,at=(z=o.wheelZoom)!=null?z:!0,it=(y=o.pinchZoom)!=null?y:!0,S=(N=o.panning)!=null?N:!0,q=($=o.panButton)!=null?$:0,Z=(L=o.oneFingerPan)!=null?L:!1,v=(b=o.margins)!=null?b:!1,rt=(F=o.wheelZoomDeltaModeLinePixels)!=null?F:17,lt=(B=o.wheelZoomDeltaModeScreenPixels)!=null?B:53,M,a,g=!1,m=this.viewbox(),w=function(t){if(!v)return t;var e=v.top,i=v.left,s=v.bottom,u=v.right,r=k.attr(["width","height"]),h=r.width,_=r.height,n=k.node.preserveAspectRatio.baseVal,p=0,E=0,V=0,Y=0;if(n.align!==n.SVG_PRESERVEASPECTRATIO_NONE){var R=h/_,d=m.width/m.height;if(d!==R){var Q=n.meetOrSlice!==n.SVG_MEETORSLICE_SLICE,x=R>d?"width":"height",W=x==="width",H=Q&&W||!Q&&!W,mt=H?R/d:d/R,c=t[x]-t[x]*mt;H?n.align===n.SVG_PRESERVEASPECTRATIO_XMIDYMIN||n.align===n.SVG_PRESERVEASPECTRATIO_XMIDYMID||n.align===n.SVG_PRESERVEASPECTRATIO_XMIDYMAX?(p=c/2,E=-c/2):n.align===n.SVG_PRESERVEASPECTRATIO_XMINYMIN||n.align===n.SVG_PRESERVEASPECTRATIO_XMINYMID||n.align===n.SVG_PRESERVEASPECTRATIO_XMINYMAX?E=-c:(n.align===n.SVG_PRESERVEASPECTRATIO_XMAXYMIN||n.align===n.SVG_PRESERVEASPECTRATIO_XMAXYMID||n.align===n.SVG_PRESERVEASPECTRATIO_XMAXYMAX)&&(p=c):n.align===n.SVG_PRESERVEASPECTRATIO_XMINYMID||n.align===n.SVG_PRESERVEASPECTRATIO_XMIDYMID||n.align===n.SVG_PRESERVEASPECTRATIO_XMAXYMID?(V=c/2,Y=-c/2):n.align===n.SVG_PRESERVEASPECTRATIO_XMINYMIN||n.align===n.SVG_PRESERVEASPECTRATIO_XMIDYMIN||n.align===n.SVG_PRESERVEASPECTRATIO_XMAXYMIN?Y=-c:(n.align===n.SVG_PRESERVEASPECTRATIO_XMINYMAX||n.align===n.SVG_PRESERVEASPECTRATIO_XMIDYMAX||n.align===n.SVG_PRESERVEASPECTRATIO_XMAXYMAX)&&(V=c)}}var ut=m.width+m.x-i-p,ct=m.x+u-t.width-E,pt=m.height+m.y-e-V,Et=m.y+s-t.height-Y;return t.x=Math.min(ut,Math.max(ct,t.x)),t.y=Math.min(pt,Math.max(Et,t.y)),t},ht=function(t){t.preventDefault();var e;switch(t.deltaMode){case 1:e=t.deltaY*rt;break;case 2:e=t.deltaY*lt;break;default:e=t.deltaY;break}var i=Math.pow(1+ot,-1*e/100)*this.zoom(),s=this.point(t.clientX,t.clientY);if(i>X&&(i=X),i<T&&(i=T),this.dispatch("zoom",{level:i,focus:s}).defaultPrevented)return this;if(this.zoom(i,s),v){var u=w(this.viewbox());this.viewbox(u)}},U=function l(t){if(a=f(t),a.length<2){S&&Z&&P.call(this,t);return}S&&Z&&J.call(this,t),t.preventDefault(),!this.dispatch("pinchZoomStart",{event:t}).defaultPrevented&&(this.off("touchstart.panZoom",l),g=!0,A(document,"touchmove.panZoom",j,this,{passive:!1}),A(document,"touchend.panZoom",st,this,{passive:!1}))},st=function l(t){t.preventDefault();var e=f(t);e.length>1||(g=!1,this.dispatch("pinchZoomEnd",{event:t}),I(document,"touchmove.panZoom",j),I(document,"touchend.panZoom",l),this.on("touchstart.panZoom",U),e.length&&S&&Z&&P.call(this,t))},j=function(t){t.preventDefault();var e=f(t),i=this.zoom(),s=Math.sqrt(Math.pow(a[0].clientX-a[1].clientX,2)+Math.pow(a[0].clientY-a[1].clientY,2)),u=Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2)),r=s/u;(i<T&&r>1||i>X&&r<1)&&(r=1);var h={x:e[0].clientX+.5*(e[1].clientX-e[0].clientX),y:e[0].clientY+.5*(e[1].clientY-e[0].clientY)},_={x:a[0].clientX+.5*(a[1].clientX-a[0].clientX),y:a[0].clientY+.5*(a[1].clientY-a[0].clientY)},n=this.point(h.x,h.y),p=this.point(2*h.x-_.x,2*h.y-_.y),E=new tt(this.viewbox()).transform(new nt().translate(-p.x,-p.y).scale(r,0,0).translate(n.x,n.y));w(E),this.viewbox(E),a=e,this.dispatch("zoom",{box:E,focus:p})},P=function l(t){var e=t.type.indexOf("mouse")>-1;e&&t.button!==q&&t.which!==q+1||(t.preventDefault(),this.off("mousedown.panZoom",l),a=f(t),!g&&(this.dispatch("panStart",{event:t}),M={x:a[0].clientX,y:a[0].clientY},A(document,"touchmove.panZoom mousemove.panZoom",K,this,{passive:!1}),A(document,"touchend.panZoom mouseup.panZoom",J,this,{passive:!1})))},J=function l(t){t.preventDefault(),I(document,"touchmove.panZoom mousemove.panZoom",K),I(document,"touchend.panZoom mouseup.panZoom",l),this.on("mousedown.panZoom",P),this.dispatch("panEnd",{event:t})},K=function(t){t.preventDefault();var e=f(t),i={x:e[0].clientX,y:e[0].clientY},s=this.point(i.x,i.y),u=this.point(M.x,M.y),r=[u.x-s.x,u.y-s.y];if(!(!r[0]&&!r[1])){var h=new tt(this.viewbox()).transform(new nt().translate(r[0],r[1]));M=i,w(h),!this.dispatch("panning",{box:h,event:t}).defaultPrevented&&this.viewbox(h)}};return at&&this.on("wheel.panZoom",ht,this,{passive:!1}),it&&this.on("touchstart.panZoom",U,this,{passive:!1}),S&&this.on("mousedown.panZoom",P,this,{passive:!1}),this}});
