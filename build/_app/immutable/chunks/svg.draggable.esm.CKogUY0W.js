import{e as c,E as v,o as u,B as b,G as m,a as s}from"./virtual-circuit.DMf_QO9c.js";function w(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function g(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function x(i,t,e){return t&&g(i.prototype,t),e&&g(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}var f=function(t){return t.changedTouches&&(t=t.changedTouches[0]),{x:t.clientX,y:t.clientY}},y=function(){function i(t){w(this,i),t.remember("_draggable",this),this.el=t,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}return x(i,[{key:"init",value:function(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}},{key:"startDrag",value:function(e){var a=!e.type.indexOf("mouse");if(!(a&&e.which!==1&&e.buttons!==0)&&!this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented){e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(f(e));var r=(a?"mousemove":"touchmove")+".drag",n=(a?"mouseup":"touchend")+".drag";u(window,r,this.drag,this,{passive:!1}),u(window,n,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}}},{key:"drag",value:function(e){var a=this.box,r=this.lastClick,n=this.el.point(f(e)),o=n.x-r.x,h=n.y-r.y;if(!o&&!h)return a;var l=a.x+o,d=a.y+h;this.box=new b(l,d,a.w,a.h),this.lastClick=n,!this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented&&this.move(l,d)}},{key:"move",value:function(e,a){this.el.type==="svg"?m.prototype.move.call(this.el,e,a):this.el.move(e,a)}},{key:"endDrag",value:function(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),s(window,"mousemove.drag"),s(window,"touchmove.drag"),s(window,"mouseup.drag"),s(window,"touchend.drag"),this.init(!0)}}]),i}();c(v,{draggable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=this.remember("_draggable")||new y(this);return e.init(t),this}});
